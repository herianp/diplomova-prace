---
phase: 11-team-creation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/composable/useOnboardingComposable.ts
  - src/components/onboarding/CreateTeamForm.vue
  - src/components/onboarding/OnboardingWizard.vue
  - src/components/onboarding/OnboardingWizardMobile.vue
  - src/i18n/en-US/index.ts
  - src/i18n/cs-CZ/index.ts
autonomous: true
requirements: [TEAM-01, TEAM-02]
must_haves:
  truths:
    - "A teamless user can type a team name in step 3 of the onboarding wizard and submit it"
    - "After submitting, the team is created in Firestore with the user as creator, member, and power user"
    - "The wizard detects the new team via the existing teamStore.teams watcher and shows the success screen"
    - "Team name validation prevents empty or whitespace-only names"
    - "The create form works on both desktop (QStepper) and mobile (flex layout) wizard variants"
  artifacts:
    - path: "src/components/onboarding/CreateTeamForm.vue"
      provides: "Inline team creation form with name input, submit button, validation"
      contains: "q-input"
    - path: "src/composable/useOnboardingComposable.ts"
      provides: "createTeam function wired to useTeamUseCases"
      contains: "createTeam"
    - path: "src/i18n/en-US/index.ts"
      provides: "English translations for team creation form"
      contains: "teamNameLabel"
    - path: "src/i18n/cs-CZ/index.ts"
      provides: "Czech translations for team creation form"
      contains: "teamNameLabel"
  key_links:
    - from: "src/components/onboarding/CreateTeamForm.vue"
      to: "src/composable/useOnboardingComposable.ts"
      via: "props/emits or composable call for createTeam"
      pattern: "createTeam"
    - from: "src/composable/useOnboardingComposable.ts"
      to: "src/composable/useTeamUseCases.ts"
      via: "useTeamUseCases().createTeam()"
      pattern: "useTeamUseCases.*createTeam"
    - from: "src/components/onboarding/OnboardingWizard.vue"
      to: "src/components/onboarding/CreateTeamForm.vue"
      via: "component import replacing placeholder banner"
      pattern: "CreateTeamForm"
---

<objective>
Replace the placeholder banner in onboarding wizard step 3 ("create" path) with a working team creation form that calls the existing `useTeamUseCases.createTeam()`. The team creator is automatically set as power user by the existing `teamFirebase.createTeam()` implementation.

Purpose: Fulfills TEAM-01 (any user can create a team) and TEAM-02 (creator becomes power user) — the backend logic already exists, this plan wires the UI.
Output: Working inline team creation form in both desktop and mobile onboarding wizard variants.
</objective>

<execution_context>
@C:/Users/Developer/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-onboarding-wizard-route-guarding/10-02-SUMMARY.md
@src/composable/useOnboardingComposable.ts
@src/composable/useTeamUseCases.ts
@src/services/teamFirebase.ts
@src/components/onboarding/OnboardingWizard.vue
@src/components/onboarding/OnboardingWizardMobile.vue
@src/i18n/en-US/index.ts
@src/i18n/cs-CZ/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create inline team creation form and wire to onboarding composable</name>
  <files>
    src/components/onboarding/CreateTeamForm.vue
    src/composable/useOnboardingComposable.ts
    src/i18n/en-US/index.ts
    src/i18n/cs-CZ/index.ts
  </files>
  <action>
1. **Create `src/components/onboarding/CreateTeamForm.vue`** — a reusable inline form component:
   - Template: `q-input` for team name (outlined, v-model bound), `q-btn` submit button (color="primary", full-width or right-aligned, :loading bound to isCreating prop, :disable when teamName is empty/whitespace)
   - Props: `isCreating: boolean` (loading state from parent)
   - Emits: `submit(teamName: string)` — emitted on button click or Enter key, only if trimmed name is non-empty
   - Local ref `teamName` (string), no external state dependencies
   - Use `@keyup.enter` on the input to also trigger submit
   - Validation: show q-input error state with rule `val => !!val.trim() || $t('onboarding.createTeam.nameRequired')` using Quasar's `:rules` prop
   - Style: minimal, no card wrapper (parent wizard provides the container)

2. **Update `src/composable/useOnboardingComposable.ts`**:
   - Import `useTeamUseCases` from `@/composable/useTeamUseCases`
   - Import `useAuthStore` is already there — use `authStore.user?.uid` for the userId param
   - Add `isCreatingTeam = ref(false)` reactive ref
   - Add `createTeam` async function:
     ```
     const createTeam = async (teamName: string): Promise<void> => {
       const uid = authStore.user?.uid
       if (!uid) return
       isCreatingTeam.value = true
       try {
         await useTeamUseCases().createTeam(teamName, uid)
         // Success is handled by the teamStore.teams watcher in the wizard component
         // which sets showSuccess = true when teams.length > 0
       } finally {
         isCreatingTeam.value = false
       }
     }
     ```
   - Export `isCreatingTeam` and `createTeam` from the composable return object

3. **Update i18n translations** — add `createTeam` sub-object inside `onboarding.teamChoice`:

   **en-US** (inside `onboarding.teamChoice`):
   ```
   createTeam: {
     teamNameLabel: 'Team Name',
     teamNameHint: 'Choose a name for your new team',
     nameRequired: 'Team name is required',
     submitButton: 'Create Team'
   }
   ```

   **cs-CZ** (inside `onboarding.teamChoice`):
   ```
   createTeam: {
     teamNameLabel: 'Název týmu',
     teamNameHint: 'Zvolte název pro váš nový tým',
     nameRequired: 'Název týmu je povinný',
     submitButton: 'Vytvořit tým'
   }
   ```
  </action>
  <verify>
  - `npx vue-tsc --noEmit` passes (or at minimum no new errors in modified files)
  - CreateTeamForm.vue exists with q-input and q-btn
  - useOnboardingComposable.ts exports `createTeam` and `isCreatingTeam`
  - Both i18n files contain `onboarding.teamChoice.createTeam.teamNameLabel`
  </verify>
  <done>
  - CreateTeamForm.vue component exists with name input, submit button, validation, loading state
  - useOnboardingComposable exports createTeam function that calls useTeamUseCases().createTeam()
  - i18n translations for team creation form exist in both en-US and cs-CZ
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace placeholder banners with CreateTeamForm in both wizard variants</name>
  <files>
    src/components/onboarding/OnboardingWizard.vue
    src/components/onboarding/OnboardingWizardMobile.vue
  </files>
  <action>
1. **Update `src/components/onboarding/OnboardingWizard.vue`** (desktop):
   - Import `CreateTeamForm` from `@/components/onboarding/CreateTeamForm.vue`
   - Destructure `createTeam` and `isCreatingTeam` from `useOnboardingComposable()` (add to existing destructure)
   - Replace the placeholder `q-banner` block (lines 92-97, the `v-else-if="teamChoicePath === 'create'"` section) with:
     ```html
     <div v-else-if="teamChoicePath === 'create'">
       <CreateTeamForm :is-creating="isCreatingTeam" @submit="createTeam" />
     </div>
     ```

2. **Update `src/components/onboarding/OnboardingWizardMobile.vue`** (mobile):
   - Import `CreateTeamForm` from `@/components/onboarding/CreateTeamForm.vue`
   - Destructure `createTeam` and `isCreatingTeam` from `useOnboardingComposable()` (add to existing destructure)
   - Replace the placeholder `q-banner` block (lines 97-101, the `v-else-if="teamChoicePath === 'create'"` section) with:
     ```html
     <div v-else-if="teamChoicePath === 'create'">
       <CreateTeamForm :is-creating="isCreatingTeam" @submit="createTeam" />
     </div>
     ```

3. **Verify the flow works end-to-end conceptually:**
   - User clicks "Create Team" card → `selectTeamPath('create')` → shows CreateTeamForm
   - User types name, clicks submit → emits `submit(teamName)` → calls composable `createTeam(teamName)`
   - Composable calls `useTeamUseCases().createTeam(teamName, uid)` → Firebase creates team doc with user as creator/member/poweruser
   - The existing `getTeamsByUserId` listener (already active from auth init) picks up the new team → `teamStore.setTeams()` updates
   - The existing `watch(teamStore.teams.length)` in both wizard components detects length > 0 → sets `showSuccess = true`
   - Success screen is shown with "Go to Dashboard" button
  </action>
  <verify>
  - `quasar build` succeeds without errors (or `npx vue-tsc --noEmit`)
  - Both OnboardingWizard.vue and OnboardingWizardMobile.vue import and render CreateTeamForm
  - No `q-banner` with `createPlaceholder` text remains in either wizard file
  - The `v-else-if="teamChoicePath === 'create'"` sections now render `<CreateTeamForm>`
  </verify>
  <done>
  - Both desktop and mobile wizard variants render CreateTeamForm instead of placeholder banner
  - The complete flow is wired: form submit → composable → use case → Firebase → listener → success screen
  - Build passes with no errors
  </done>
</task>

</tasks>

<verification>
1. `quasar build` completes without errors
2. In the running app (`quasar dev`): navigate to /onboarding as a teamless user, reach step 3, click "Create Team" card, see the team name form
3. Type a team name, click "Create Team" button → team is created in Firestore
4. The success screen appears automatically (teamStore.teams watcher fires)
5. Verify in Firestore that the team document has `creator`, `members`, and `powerusers` arrays all containing the user's UID
</verification>

<success_criteria>
- Teamless user can create a team from the onboarding wizard step 3 with just a team name
- Team creator is automatically in the powerusers array (TEAM-02 satisfied by existing backend)
- No admin approval needed (TEAM-01 — Firestore rules already allow any authenticated user)
- Success screen triggers automatically after team creation
- Both desktop and mobile wizard variants work
- Build passes, no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/11-team-creation/11-01-SUMMARY.md`
</output>
