---
phase: 03-code-quality-typescript
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - jsconfig.json
  - tsconfig.json
  - src/composable/useFormValidation.ts
  - src/composable/useSurveyStatusManager.ts
  - src/services/notificationService.ts
  - src/firebase/config.ts
autonomous: true

must_haves:
  truths:
    - "TypeScript compiler shows zero implicit any errors with noImplicitAny enabled"
    - "Firebase config TODO comment is resolved with documentation"
  artifacts:
    - path: "tsconfig.json"
      provides: "TypeScript strict configuration extending Quasar config"
      contains: "noImplicitAny"
    - path: "src/composable/useFormValidation.ts"
      provides: "Form validation with proper types instead of any"
    - path: "src/firebase/config.ts"
      provides: "Firebase config with documentation replacing TODO"
  key_links:
    - from: "tsconfig.json"
      to: ".quasar/tsconfig.json"
      via: "extends"
      pattern: "extends.*\\.quasar/tsconfig"
---

<objective>
Enable TypeScript strict mode incrementally (noImplicitAny first) and resolve Firebase config TODO comment.

Purpose: Catch implicit type errors at compile time (QAL-01) and resolve the Firebase config TODO (QAL-03).
Output: tsconfig.json with strict flags, all `any` types replaced with proper types, Firebase config documented.
</objective>

<execution_context>
@C:/Users/Developer/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-code-quality-typescript/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enable TypeScript strict mode and fix all any types</name>
  <files>
    jsconfig.json
    tsconfig.json
    src/composable/useFormValidation.ts
    src/composable/useSurveyStatusManager.ts
    src/services/notificationService.ts
  </files>
  <action>
1. Rename `jsconfig.json` to `tsconfig.json` (keep same content — it already extends `.quasar/tsconfig.json`).

2. Add strict mode flags to `tsconfig.json` compilerOptions:
   ```json
   {
     "extends": "./.quasar/tsconfig.json",
     "compilerOptions": {
       "baseUrl": ".",
       "paths": { "@/*": ["src/*"] },
       "noImplicitAny": true,
       "strictNullChecks": true,
       "strictFunctionTypes": true,
       "strictBindCallApply": true,
       "strictPropertyInitialization": true,
       "noImplicitThis": true,
       "strict": true
     },
     "include": ["src"]
   }
   ```
   Note: Research says 15 explicit `any` in 3 files and codebase is relatively clean. Enable full strict mode directly rather than incrementally — the scope is manageable.

3. Fix `src/composable/useFormValidation.ts` (13 `any` occurrences):
   - Change `ValidationRule` type from `(val: any) => boolean | string` to `(val: unknown) => boolean | string`
   - Change `FieldConfig.value` from `any` to `unknown`
   - Update all validation rule lambda parameters from `(val: any)` to `(val: unknown)` with appropriate type guards where needed (e.g., `typeof val === 'string'` for string operations, `Number(val)` for numeric checks)
   - Update `validateField`, `validateFields`, `createFormValidator` parameter types from `any` to `unknown`
   - For `confirm()` method: change `originalValue: any` to `originalValue: unknown`
   - For `custom()` method: change validator parameter from `(val: any) => boolean` to `(val: unknown) => boolean`

4. Fix `src/composable/useSurveyStatusManager.ts` (1 `any` occurrence):
   - Line 198: `function readonly<T>(ref: any)` — type the `ref` parameter properly using Vue's `Ref<T>` type: `function readonly<T>(ref: Ref<T>): DeepReadonly<Ref<T>>`

5. Fix `src/services/notificationService.ts` (1 `any` occurrence):
   - Line 24: `const notifyConfig: any = {` — replace with proper Quasar QNotify options type. Import `QNotifyCreateOptions` from 'quasar' and use that, or define an inline type matching the config shape.

6. Run `npx tsc --noEmit` from project root to verify zero TypeScript errors. If additional implicit any errors are revealed by the strict flags in OTHER files beyond these 3, fix those too. Common places: Firebase service callbacks (type the snapshot parameters), composable return types, Pinia store actions.
  </action>
  <verify>Run `npx tsc --noEmit` from project root — must show zero errors. Run `npx quasar dev` to confirm the dev server starts without errors.</verify>
  <done>TypeScript strict mode fully enabled. Zero compiler errors with `strict: true`. All explicit `any` types replaced with proper types.</done>
</task>

<task type="auto">
  <name>Task 2: Resolve Firebase config TODO comment</name>
  <files>src/firebase/config.ts</files>
  <action>
1. In `src/firebase/config.ts`, replace the TODO comment block (lines 7-8):
   ```
   // TODO: Add SDKs for Firebase products that you want to use
   // https://firebase.google.com/docs/web/setup#available-libraries
   ```

   With a proper documentation comment:
   ```typescript
   /**
    * Firebase Configuration
    *
    * Uses Vite environment variables for API key (VITE_FIREBASE_API_KEY).
    * Other config values are non-secret project identifiers.
    *
    * Environment setup:
    * - Development: Set VITE_FIREBASE_API_KEY in .env.local (gitignored)
    * - Production: Set VITE_FIREBASE_API_KEY in deployment environment
    *
    * SDKs in use: firebase/app, firebase/auth, firebase/firestore, firebase/analytics
    */
   ```

2. This is a simple comment replacement — no code logic changes.
  </action>
  <verify>Read `src/firebase/config.ts` and confirm: no TODO comments remain, documentation comment is present, code still compiles.</verify>
  <done>Firebase config TODO resolved with documentation explaining environment variable pattern and SDK usage.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` exits with code 0 (zero errors)
- `npx quasar dev` starts successfully
- No `TODO` comments in `src/firebase/config.ts`
- No `: any` types in `src/composable/useFormValidation.ts`, `src/composable/useSurveyStatusManager.ts`, `src/services/notificationService.ts`
</verification>

<success_criteria>
TypeScript compiler shows zero errors with strict mode enabled. All 15 explicit `any` types replaced. Firebase config TODO resolved.
</success_criteria>

<output>
After completion, create `.planning/phases/03-code-quality-typescript/03-01-SUMMARY.md`
</output>
